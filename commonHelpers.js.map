{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst apiKey = '44413668-2012401924f35061b4cb3018c';\n\nconst errorMessage = 'Oops! Something went wrong! Try realoding the page!';\nconst baseUrl = 'https://pixabay.com/api';\n\nexport async function getImages(searchQuery, page, perPage) {\n  const {data} = await axios.get(`${baseUrl}/?key=${apiKey}&q=${searchQuery}&image_type=photo&orientation=horizontal&safesearch=true&per_page=${perPage}&page=${page}`);\n  return data;\n}\n","import { getImages } from './js/pixabay-api';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\ndocument.addEventListener('DOMContentLoaded', init);\n\nfunction init() {\n  const form = document.getElementById('search-form');\n  const gallery = document.querySelector('.gallery');\n  const loadMoreBtn = document.querySelector('.load-more');\n  let searchQuery = '';\n  let page = 1;\n  const perPage = 40;\n\n  const lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n  });\n\n  loadMoreBtn.style.display = 'none';\n  form.addEventListener('submit', onFormSubmit);\n  loadMoreBtn.addEventListener('click', fetchImages);\n\n  async function onFormSubmit(e) {\n    e.preventDefault();\n    gallery.innerHTML = '';\n    searchQuery = e.target.searchQuery.value.trim();\n    if (searchQuery.length < 1) {\n      showWarning(\"Search input must not be empty!\")\n      e.target.searchQuery.value = '';\n      loadMoreBtn.style.display = 'none';\n      return;\n    }\n    page = 1;\n    await fetchImages();\n  }\n\n  async function fetchImages() {\n    try {\n      const data = await getImages(searchQuery, page, perPage);\n      handleResponse(data);\n    } catch (error) {\n      handleError(error);\n    }\n  }\n\n  function handleResponse(data) {\n    if (data.totalHits === 0) {\n      loadMoreBtn.style.display = 'none';\n      showError('Sorry, there are no images matching your search query. Please try again.');\n      return;\n    }\n\n    renderImages(data.hits);\n\n    if (page === 1) {\n      showSuccess(`Hooray! We found ${data.totalHits} images.`);\n    } else {\n      scrollPage();\n    }\n\n    toggleLoadMoreButton(data.totalHits);\n    page += 1;\n  }\n\n  function handleError(error) {\n    console.error(error);\n    showError('An error occurred while fetching images. Please try again later.');\n  }\n\n  function renderImages(images) {\n    const markup = images.map(createImageCard).join('');\n    gallery.insertAdjacentHTML('beforeend', markup);\n    lightbox.refresh();\n  }\n\n  function createImageCard({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) {\n    return `\n      <div class=\"photo-card\">\n          <a href=\"${largeImageURL}\">\n              <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n          </a>\n          <div class=\"info\">\n              <p class=\"info-item\"><b>Likes</b> ${likes}</p>\n              <p class=\"info-item\"><b>Views</b> ${views}</p>\n              <p class=\"info-item\"><b>Comments</b> ${comments}</p>\n              <p class=\"info-item\"><b>Downloads</b> ${downloads}</p>\n          </div>\n      </div>\n    `;\n  }\n\n  function scrollPage() {\n    const { height: cardHeight } = document.querySelector('.gallery').firstElementChild.getBoundingClientRect();\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n  }\n\n  function toggleLoadMoreButton(totalHits) {\n    if (page * perPage >= totalHits) {\n      loadMoreBtn.style.display = 'none';\n      showInfo(\"We're sorry, but you've reached the end of search results.\");\n    } else {\n      loadMoreBtn.style.display = 'block';\n    }\n  }\n\n  function showError(message) {\n    iziToast.error({\n      title: 'Error',\n      position: 'topRight',\n      message: message,\n    });\n  }\n\n  function showSuccess(message) {\n    iziToast.success({\n      title: 'Success',\n      position: 'topRight',\n      message: message,\n    });\n  }\n\n  function showInfo(message) {\n    iziToast.info({\n      title: 'Info',\n      position: 'topRight',\n      message: message,\n    });\n  }\n\n\n  function showWarning(message) {\n    iziToast.warning({\n      title: 'Warning',\n      position: 'topRight',\n      message: message,\n    });\n  }\n}\n"],"names":["apiKey","baseUrl","getImages","searchQuery","page","perPage","data","axios","init","form","gallery","loadMoreBtn","lightbox","SimpleLightbox","onFormSubmit","fetchImages","showWarning","handleResponse","error","handleError","showError","renderImages","showSuccess","scrollPage","toggleLoadMoreButton","images","markup","createImageCard","webformatURL","largeImageURL","tags","likes","views","comments","downloads","cardHeight","totalHits","showInfo","message","iziToast"],"mappings":"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"}