{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst apiKey = '44413668-2012401924f35061b4cb3018c';\n\nconst errorMessage = 'Oops! Something went wrong! Try realoding the page!';\nconst baseUrl = 'https://pixabay.com/api';\n\nexport async function getImages(searchQuery, page, perPage) {\n  try {\n    const response = await axios.get(`${baseUrl}/?key=${apiKey}&q=${searchQuery}&image_type=photo&orientation=horizontal&safesearch=true&per_page=${perPage}&page=${page}`);\n    return response.data;\n  } catch (error) {\n    throw new Error(errorMessage);\n  }\n}\n","import { getImages } from './js/pixabay-api';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\ndocument.addEventListener('DOMContentLoaded', init);\n\nfunction init() {\n  const form = document.getElementById('search-form');\n  const gallery = document.querySelector('.gallery');\n  const loadMoreBtn = document.querySelector('.load-more');\n  let searchQuery = '';\n  let page = 1;\n  const perPage = 40;\n\n  loadMoreBtn.style.display = 'none';\n  form.addEventListener('submit', onFormSubmit);\n  loadMoreBtn.addEventListener('click', fetchImages);\n\n  async function onFormSubmit(e) {\n    e.preventDefault();\n    gallery.innerHTML = '';\n    searchQuery = e.target.searchQuery.value.trim();\n    page = 1;\n    await fetchImages();\n  }\n\n  async function fetchImages() {\n    try {\n      const data = await getImages(searchQuery, page, perPage);\n      handleResponse(data);\n    } catch (error) {\n      handleError(error);\n    }\n  }\n\n  function handleResponse(data) {\n    if (data.totalHits === 0) {\n      showError('Sorry, there are no images matching your search query. Please try again.');\n      return;\n    }\n\n    renderImages(data.hits);\n\n    if (page === 1) {\n      showSuccess(`Hooray! We found ${data.totalHits} images.`);\n    } else {\n      scrollPage();\n    }\n\n    page += 1;\n    toggleLoadMoreButton(data.totalHits);\n  }\n\n  function handleError(error) {\n    console.error(error);\n    showError('An error occurred while fetching images. Please try again later.');\n  }\n\n  function renderImages(images) {\n    const markup = images.map(createImageCard).join('');\n    gallery.insertAdjacentHTML('beforeend', markup);\n    refreshLightbox();\n  }\n\n  function createImageCard({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) {\n    return `\n      <div class=\"photo-card\">\n          <a href=\"${largeImageURL}\">\n              <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n          </a>\n          <div class=\"info\">\n              <p class=\"info-item\"><b>Likes</b> ${likes}</p>\n              <p class=\"info-item\"><b>Views</b> ${views}</p>\n              <p class=\"info-item\"><b>Comments</b> ${comments}</p>\n              <p class=\"info-item\"><b>Downloads</b> ${downloads}</p>\n          </div>\n      </div>\n    `;\n  }\n\n  function refreshLightbox() {\n    const lightbox = new SimpleLightbox('.gallery a', {\n      captionDelay: 250,\n      captionsData: 'alt',\n    });\n    lightbox.refresh();\n  }\n\n  function scrollPage() {\n    const { height: cardHeight } = document.querySelector('.gallery').firstElementChild.getBoundingClientRect();\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n  }\n\n  function toggleLoadMoreButton(totalHits) {\n    if (page * perPage >= totalHits) {\n      loadMoreBtn.style.display = 'none';\n      showInfo(\"We're sorry, but you've reached the end of search results.\");\n    } else {\n      loadMoreBtn.style.display = 'block';\n    }\n  }\n\n  function showError(message) {\n    iziToast.error({\n      title: 'Error',\n      position: 'topRight',\n      message: message,\n    });\n  }\n\n  function showSuccess(message) {\n    iziToast.success({\n      title: 'Success',\n      position: 'topRight',\n      message: message,\n    });\n  }\n\n  function showInfo(message) {\n    iziToast.info({\n      title: 'Info',\n      position: 'topRight',\n      message: message,\n    });\n  }\n}\n"],"names":["apiKey","errorMessage","baseUrl","getImages","searchQuery","page","perPage","axios","init","form","gallery","loadMoreBtn","onFormSubmit","fetchImages","data","handleResponse","error","handleError","showError","renderImages","showSuccess","scrollPage","toggleLoadMoreButton","images","markup","createImageCard","refreshLightbox","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","cardHeight","totalHits","showInfo","message","iziToast"],"mappings":"owBAEA,MAAMA,EAAS,qCAETC,EAAe,sDACfC,EAAU,0BAET,eAAeC,EAAUC,EAAaC,EAAMC,EAAS,CAC1D,GAAI,CAEF,OADiB,MAAMC,EAAM,IAAI,GAAGL,CAAO,SAASF,CAAM,MAAMI,CAAW,qEAAqEE,CAAO,SAASD,CAAI,EAAE,GACtJ,IACjB,MAAe,CACd,MAAM,IAAI,MAAMJ,CAAY,CAC7B,CACH,CCRA,SAAS,iBAAiB,mBAAoBO,CAAI,EAElD,SAASA,GAAO,CACd,MAAMC,EAAO,SAAS,eAAe,aAAa,EAC5CC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAc,SAAS,cAAc,YAAY,EACvD,IAAIP,EAAc,GACdC,EAAO,EACX,MAAMC,EAAU,GAEhBK,EAAY,MAAM,QAAU,OAC5BF,EAAK,iBAAiB,SAAUG,CAAY,EAC5CD,EAAY,iBAAiB,QAASE,CAAW,EAEjD,eAAeD,EAAa,EAAG,CAC7B,EAAE,eAAc,EAChBF,EAAQ,UAAY,GACpBN,EAAc,EAAE,OAAO,YAAY,MAAM,KAAI,EAC7CC,EAAO,EACP,MAAMQ,EAAW,CAClB,CAED,eAAeA,GAAc,CAC3B,GAAI,CACF,MAAMC,EAAO,MAAMX,EAAUC,EAAaC,EAAMC,CAAO,EACvDS,EAAeD,CAAI,CACpB,OAAQE,EAAO,CACdC,EAAYD,CAAK,CAClB,CACF,CAED,SAASD,EAAeD,EAAM,CAC5B,GAAIA,EAAK,YAAc,EAAG,CACxBI,EAAU,0EAA0E,EACpF,MACD,CAEDC,EAAaL,EAAK,IAAI,EAElBT,IAAS,EACXe,EAAY,oBAAoBN,EAAK,SAAS,UAAU,EAExDO,IAGFhB,GAAQ,EACRiB,EAAqBR,EAAK,SAAS,CACpC,CAED,SAASG,EAAYD,EAAO,CAC1B,QAAQ,MAAMA,CAAK,EACnBE,EAAU,kEAAkE,CAC7E,CAED,SAASC,EAAaI,EAAQ,CAC5B,MAAMC,EAASD,EAAO,IAAIE,CAAe,EAAE,KAAK,EAAE,EAClDf,EAAQ,mBAAmB,YAAac,CAAM,EAC9CE,GACD,CAED,SAASD,EAAgB,CAAE,aAAAE,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,GAAa,CACjG,MAAO;AAAA;AAAA,qBAEUL,CAAa;AAAA,0BACRD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA,kDAGFC,CAAK;AAAA,kDACLC,CAAK;AAAA,qDACFC,CAAQ;AAAA,sDACPC,CAAS;AAAA;AAAA;AAAA,KAI5D,CAED,SAASP,GAAkB,CACR,IAAIQ,EAAe,aAAc,CAChD,aAAc,IACd,aAAc,KACpB,CAAK,EACQ,QAAO,CACjB,CAED,SAASb,GAAa,CACpB,KAAM,CAAE,OAAQc,CAAU,EAAK,SAAS,cAAc,UAAU,EAAE,kBAAkB,wBACpF,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,SAAU,QAChB,CAAK,CACF,CAED,SAASb,EAAqBc,EAAW,CACnC/B,EAAOC,GAAW8B,GACpBzB,EAAY,MAAM,QAAU,OAC5B0B,EAAS,4DAA4D,GAErE1B,EAAY,MAAM,QAAU,OAE/B,CAED,SAASO,EAAUoB,EAAS,CAC1BC,EAAS,MAAM,CACb,MAAO,QACP,SAAU,WACV,QAASD,CACf,CAAK,CACF,CAED,SAASlB,EAAYkB,EAAS,CAC5BC,EAAS,QAAQ,CACf,MAAO,UACP,SAAU,WACV,QAASD,CACf,CAAK,CACF,CAED,SAASD,EAASC,EAAS,CACzBC,EAAS,KAAK,CACZ,MAAO,OACP,SAAU,WACV,QAASD,CACf,CAAK,CACF,CACH"}